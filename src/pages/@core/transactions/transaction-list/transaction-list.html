<!--
  Generated template for the TransactionListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header no-border>

  <ion-navbar transparent>
    <ion-title>
      <span ion-text color="dark">{{walletName }}</span>
    </ion-title>

    <ion-buttons end>
      <button ion-button icon-only (click)="dismiss()" color="dark">
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

  <section wallets>

      <ion-card balance>
        <ion-card-content>
          <br>

          
          <h1 wallet-name text-center> {{selectedAccount.account?.name}}</h1>

          <h1 color="dark" text-center> ≈${{ (totalBalance? totalBalance:0) | number : '1.2-2'}}</h1>
          <!-- <h2 color="dark"  text-center>≈${{ (totalBalance? totalBalance:0) | number : '1.2-2'}}</h2> -->

            <ion-list transparent-items>
                <ion-item *ngIf="selectedAccount" (click)="copy(selectedAccount.account.address.address)">
                    <ion-icon name='custom-copy' item-end></ion-icon>
                    <p text-justify address *ngIf="selectedAccount">{{ selectedAccount.account?.address.address }} </p>
                </ion-item>
              </ion-list>
              <button gradient-button quarter-width color-5 medium (click)="moreDetails()">
                  {{"WALLETS.MORE_DETAILS" | translate}}
              </button>
        </ion-card-content>
      </ion-card>

      
  </section>



</ion-header>

<ion-content background>
  <!-- Skeleton loader -->
  <ion-list transparent-items *ngIf="isLoading">
    <h2 padding *ngIf="!showEmptyMessage">{{"WALLETS.TRANSACTIONS" | translate}}</h2>

    <ion-card no-margin-bottom fake-card *ngFor="let fakeCard of fakeList">
      <skeleton-loader></skeleton-loader>
  </ion-card>
  <ion-card no-border>
    <ion-item text-center>
      <ion-spinner name="dots"></ion-spinner>
    </ion-item>
  </ion-card>
  </ion-list>
  <!-- ./Skeleton loader -->

  <!-- Transactions -->
  <ion-list transparent-items *ngIf="!isLoading">
    <h2 padding *ngIf="!showEmptyMessage">{{"WALLETS.TRANSACTIONS" | translate}}</h2>

    <!-- Partial Transactions -->
    <ion-card no-margin-bottom *ngFor="let transaction of aggregateTransactions; trackBy: trackByHash"
      (click)="gotoTransactionDetail(transaction)">        

      <!-- if transfer  -->
      <transfer-transaction *ngIf="transaction.innerTransactions[0].type == TransactionType.TRANSFER" [tx]="transaction"
        [mosaics]="mosaics" 
        [owner]="selectedAccount.account.address.address" [status]="'Partial'">
      </transfer-transaction>
    </ion-card>

    <!-- Confirmed Transactions -->
    <ion-card no-margin-bottom *ngFor="let transaction of confirmedTransactions; trackBy: trackByHash"
        (click)="gotoTransactionDetail(transaction)">        

        <!-- if transfer  -->
        <transfer-transaction *ngIf="transaction.type == TransactionType.TRANSFER" [tx]="transaction"
          [mosaics]="mosaics" 
          [owner]="selectedAccount.account.address.address" [status]="'Confirmed'">
        </transfer-transaction>
      </ion-card>


  </ion-list>
  <!-- ./Transactions -->

  <ion-grid padding empty *ngIf="showEmptyMessage" reduce-margin-top>
    <ion-row padding>
      
      <ion-col>
          <br><br>
        <img quarter-width [src]="App.STICKERS.SORRY">
        <h6 ion-text color="grey" text-wrap>
          <strong>{{"APP.EMPTY.TRANSACTIONS" | translate}}</strong>
        </h6>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-grid normal>
      <ion-row>
        <ion-col>
          <button (click)="showReceiveModal()" gradient-button full color-5 ion-button icon-start no-margin>
            <ion-icon name="arrow-round-down"></ion-icon>
            {{"WALLETS.RECEIVE" | translate}}
          </button>
        </ion-col>
        <ion-col>
          <button (click)="showSendModal()" gradient-button full color-6 ion-button icon-end no-margin>
            {{"WALLETS.SEND" | translate}}
            <ion-icon name="arrow-round-up"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>

<ng-template #loading>
  <ion-spinner name="dots"></ion-spinner>
</ng-template>
